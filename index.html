<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Smooth Interfacing with Buttons : A tutorial about building a debounced push button array">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Smooth Interfacing with Buttons</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kariefury/keyboard">View on GitHub</a>

          <h1 id="project_title">Smooth Interfacing with Buttons</h1>
          <h2 id="project_tagline">A tutorial about building a debounced push button array</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/kariefury/keyboard/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/kariefury/keyboard/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a id="welcome-to-lab-2" class="anchor" href="#welcome-to-lab-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to Lab 2!</h3>

<p>This write-up describes the steps and knowledge necessary to build an interface from a push button array to a FIFO. It assumes the reader has completed the Lab 1 Tutorial, Xillibus on Zedboard and is familiar with the Vivado toolset from Xilinx. </p>

<p>In Lab 2 we will write HDL using the Verilog language to develop an input only interface. The lab starts by understanding the wiring of the push button. Next Vivado is used to write and simulate a Verilog module for a single push button. The signal input into the FPGA fabric from the push button is studied using the Vivado debug module, and the Verilog is extended to implement hardware debouncing of the push button. Finally we multiplex 9 push buttons together and create an interface to a keyboard consisting of 9 push buttons.</p>

<h3>
<a id="1-get-started-wire-a-push-button" class="anchor" href="#1-get-started-wire-a-push-button" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Get Started: Wire a Push Button</h3>

<ul>
<li>Wire a push button and verify using a multimeter. Use a 1K Resistor.</li>
</ul>

<h3>
<a id="2-write-verilog" class="anchor" href="#2-write-verilog" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Write Verilog</h3>

<ul>
<li>Using Vivado, write a short Verilog module. It should have an input named button (<strong>btn</strong>) and an output named led(<strong>led</strong>). Include a clock (<strong>clk</strong>) as input as well. Name every variable with 3 Characters. (haha...) </li>
<li>When the button is 0 the led is off.</li>
<li>When the button is 1 the led is on.</li>
<li>Write a test bench and simulate the Verilog. 
Question: What sort of simulation signal should you use for your input? Do you need to include reset and enable signals?</li>
</ul>

<p>Here is the Verilog I used to turn the LED on when the button is 1 (<strong>btn == 1</strong>).</p>

<pre><code>module button(input btn, input clk, input rst, output led);

always @ (posedge clk)
begin
    if (rst == 1'b0) // reset when rst is 0
        begin
            led &lt;= 1'b0; // LED is off when reset is low
        end
    else
        begin
        if (btn == 1'b1)
            begin
                led &lt;= 1'b1;
            else
                led &lt;= 1'b0;
            end
    end
end

endmodule
</code></pre>

<p>The test bench code looks like this:</p>

<pre><code>module tb( );
  reg clk, reset, enable, btnPress;
  wire led;
  button u1 ( 
  .btn( btnPress ),
  .clk( clk ), 
  .rst( reset ),
  .led( led )
  ); 

  initial 
  begin 
    clk = 0; 
    reset = 0; 
    btnPress = 0;
    enable = 1;
    #1 reset = 1; // #1 means delay one cycle. (#5 means delay 5 cycles...)
  end 

  always 
    #5 clk = !clk; 

  always 
    #50 btnPress = !btnPress;

endmodule 
</code></pre>

<p>After successfully simulating your code, <strong>create and package IP</strong> for the button module.</p>

<h3>
<a id="3-record-debug-signals" class="anchor" href="#3-record-debug-signals" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Record Debug Signals</h3>

<p>The signal input into the FPGA fabric from the push button is studied using the Vivado debug module</p>

<h3>
<a id="4-hardware-debounce-push-button" class="anchor" href="#4-hardware-debounce-push-button" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. Hardware Debounce Push Button</h3>

<p>Write some more code...
Record debug....
Test Debounce with single push button</p>

<h3>
<a id="5-assemble-9-push-buttons" class="anchor" href="#5-assemble-9-push-buttons" aria-hidden="true"><span class="octicon octicon-link"></span></a>5. Assemble 9 Push Buttons</h3>

<p>How many signal wires are needed for 9 push buttons?</p>

<h3>
<a id="6-write-verilog-for-multiplexing" class="anchor" href="#6-write-verilog-for-multiplexing" aria-hidden="true"><span class="octicon octicon-link"></span></a>6. Write Verilog for Multiplexing</h3>

<h3>
<a id="7-interrupts-or-interface-to-xillibus-dev-tree-or-to-fifo" class="anchor" href="#7-interrupts-or-interface-to-xillibus-dev-tree-or-to-fifo" aria-hidden="true"><span class="octicon octicon-link"></span></a>7. Interrupts or interface to Xillibus /dev/ tree or to FIFO</h3>

<h3>
<a id="8-happy-and-complete-working-verilog-push-button-keyboard" class="anchor" href="#8-happy-and-complete-working-verilog-push-button-keyboard" aria-hidden="true"><span class="octicon octicon-link"></span></a>8. Happy and Complete working Verilog push button keyboard</h3>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>By <a href="https://github.com/kariefury" class="user-mention">@kariefury</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Smooth Interfacing with Buttons maintained by <a href="https://github.com/kariefury">kariefury</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47389602-4");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
